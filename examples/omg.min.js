/*!
* omg.js v3.0.0-beta.0
* Author: PengJiyuan
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.omg=e()}(this,function(){"use strict";!function(){for(var t=["ms","moz","webkit","o"],e=0,n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),a=window.setTimeout(function(){t(n+i)},i);return e=n+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var t={getPos:function(t){var e=t||event,n=[e.pageX,e.pageY];return{x:n[0],y:n[1]}},bind:function(t,e,n){return window.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n,t},unbind:function(t,e,n){window.removeEventListener?t.removeEventListener(e,n,!1):window.detachEvent?t.detachEvent(e,n):t["on"+e]=""},reverse:function(t){for(var e=[t.length,[]],n=e[0],i=e[1],a=0;a<n;a++)i[a]=t[n-a-1];return i},calculateCoord:function(t,e){var n,i,a,s,r,o=[Math.abs(t),Math.abs(e)],h=o[0],c=o[1];if(a=h>=c?h:c,r=a.toString().length,1===(s=a<1?this.formatFloat(a*Math.pow(10,r-2),1):a/Math.pow(10,r-1))&&r>1)s=10,r--;else if(s>10){var l=s.toString().length;s/=Math.pow(10,l-1),r=r-l+1}var u=[[1,.2],[1.2,.2],[1.4,.2],[1.5,.3],[1.8,.3],[2,.4],[2.5,.5],[3,.5],[3.5,.5],[4,.5],[5,1],[6,1],[7,1],[8,1],[10,2]];return u.forEach(function(t,e){(0===e?0:u[e-1][0])<s&&s<=t[0]&&(n=t[1],i=t[0])}),{gap:a<1?n/Math.pow(10,r-2):n*Math.pow(10,r-1),max:a<1?i/Math.pow(10,r-2):i*Math.pow(10,r-1)}},formatFloat:function(t){var e=Math.pow(10,10);return parseInt(t*e,10)/e},getMaxMin:function(t,e,n){var i,a,s=[],r=[];return e.forEach(function(e){var i=[];e.data.forEach(function(e){t?i.push(e[0]):n.data&&n.data.length>0?i.push(e):i.push(e[1])}),s.push(Math.max.apply(null,i)),r.push(Math.min.apply(null,i))}),i=Math.max.apply(null,s),a=Math.min.apply(null,r),{max:i,min:a}},isArr:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},e=function(t){this._=t};e.prototype.getPos=function(t){var e=t||event,n=[e.pageX-this._.element.offsetLeft,e.pageY-this._.element.offsetTop];return{x:n[0],y:n[1]}},e.prototype.triggerEvents=function(){if(this._.objects.some(function(e){return e.events&&t.isArr(e.events)||e.enableDrag})||this._.enableGlobalTranslate){this._.objects.some(function(t){return t.events&&t.events.some(function(t){return"mouseenter"===t.eventType||"mousemove"===t.eventType||"drag"===t.eventType||"dragin"===t.eventType||"dragout"===t.eventType||"drop"===t.eventType})})&&this.mouseEnterOrMove(),t.bind(this._.element,"mousedown",this.mouseDown.bind(this))}},e.prototype.mouseEnterOrMove=function(){var e,n=this;t.bind(this._.element,"mousemove",function(t){var i=n.getPos(t).x,a=n.getPos(t).y;e=n._.objects.some(function(t){return t.isDragging});var s=n._._objects.filter(function(t){return t.isPointInner(i,a)});if(e){s&&s.length>1&&s[1].events&&s[1].events.forEach(function(t){"dragin"!==t.eventType||s[1].hasDraggedIn||(s[1].hasDraggedIn=!0,t.callback&&t.callback(s[1]))});n._._objects.some(function(t){return t.hasDraggedIn&&(!t.isPointInner(i,a)||s[1]!==t)&&function(t){t.hasDraggedIn&&t.events.forEach(function(t){"dragout"===t.eventType&&t.callback&&t.callback(s[1])}),t.hasDraggedIn=!1}(t)})}else{s&&s.length>0&&s[0].events&&s[0].events.forEach(function(t){"mouseenter"!==t.eventType||s[0].hasEnter?"mousemove"===t.eventType&&t.callback&&t.callback(s[0]):(s[0].hasEnter=!0,t.callback&&t.callback(s[0]))});n._._objects.some(function(t){return t.hasEnter&&(!t.isPointInner(i,a)||s[0]!==t)&&function(t){t.hasEnter&&t.events.forEach(function(e){"mouseleave"===e.eventType&&e.callback&&e.callback(t)}),t.hasEnter=!1}(t)})}})},e.prototype.mouseDown=function(e){var n,i,a,s,r,o=this,h=this._.objects.some(function(t){return t.enableDrag}),c=this.getPos(e).x,l=this.getPos(e).y;o.cacheX=c,o.cacheY=l;var u=this._._objects.filter(function(t){return t.isPointInner(c,l)});if(u&&u.length>0&&(u[0].enableChangeIndex&&o.changeOrder(u[0]),u[0].events&&u[0].events.some(function(t){return"mousedown"===t.eventType&&t.callback&&t.callback(u[0])})),h){n=o._._objects.filter(function(t){return t.isPointInner(c,l)}),i=n.length>0&&n[0].events&&n[0].events.some(function(t){return"drag"===t.eventType&&(s=t.callback),"drag"===t.eventType}),a=n.length>0&&n[0].events&&n[0].events.some(function(t){return"dragend"===t.eventType&&(r=t.callback),"dragend"===t.eventType});var g=function(t){var e=o.getPos(t).x,a=o.getPos(t).y;n[0].moveX=n[0].moveX+e-o.cacheX,n[0].moveY=n[0].moveY+a-o.cacheY,i&&s(u[0]),o._.redraw(),o.cacheX=e,o.cacheY=a,n[0].isDragging=!0},f=function(e){var i=o.getPos(e).x,s=o.getPos(e).y,h=o._._objects.filter(function(t){return t.isPointInner(i,s)});if(h&&h.length>1&&h[1].hasDraggedIn){h[1].hasDraggedIn=!1;!h[1].events.some(function(t){return"drop"===t.eventType&&t.callback&&t.callback(h[1],h[0])})&&h[1].events.some(function(t){return"dragout"===t.eventType&&t.callback&&t.callback(h[1])})}a&&r(u[0]),t.unbind(document,"mousemove",g),t.unbind(document,"mouseup",f),n[0].isDragging=!1};n&&n.length>0&&n[0].enableDrag&&(t.bind(document,"mousemove",g),t.bind(document,"mouseup",f))}if(this._.enableGlobalTranslate&&!(n&&n.length>0)){var d=function(t){var e=o.getPos(t).x,n=o.getPos(t).y;o._.transX=o._.transX+e-o.cacheX,o._.transY=o._.transY+n-o.cacheY,o._.redraw(),o.cacheX=e,o.cacheY=n},v=function(){t.unbind(document,"mousemove",d),t.unbind(document,"mouseup",v)};t.bind(document,"mousemove",d),t.bind(document,"mouseup",v)}},e.prototype.changeOrder=function(e){var n=this._.objects.indexOf(e),i=this._.objects[n];this._.objects.splice(n,1),this._.objects.push(i),this._._objects=t.reverse(this._.objects),this._.redraw()};var n=function(){};n.prototype.hexToRGB=function(t){var e=[];return 3===(t=t.substr(1)).length&&(t=t.replace(/(.)/g,"$1$1")),t.replace(/../g,function(t){e.push(parseInt(t,16))}),{r:e[0],g:e[1],b:e[2],rgb:"rgb("+e.join(",")+")"}},n.prototype.rgbToHSL=function(t,e,n){t/=255,e/=255,n/=255;var i,a,s=Math.max(t,e,n),r=Math.min(t,e,n),o=(s+r)/2;if(s==r)i=a=0;else{var h=s-r;switch(a=o>.5?h/(2-s-r):h/(s+r),s){case t:i=(e-n)/h+(e<n?6:0);break;case e:i=(n-t)/h+2;break;case n:i=(t-e)/h+4}i/=6}return{h:i,s:a,l:o,hsl:"hsl("+360*i+", "+100*a+"%, "+100*o+"%)"}},n.prototype.hslToRGB=function(){},n.prototype.lighten=function(t,e){var n,i,a,s,r,o;if(t&&e&&/^[0-9]{1,2}%$/.test(e))return this.isRgba(t)?(r=this.getRgba(t),o=+r.a-+e.slice(0,-1)/100,"rgba("+r.r+", "+r.g+", "+r.b+", "+o+")"):(n=this.getHsl(t),i=+n.h,a=+n.s,s=100*+n.l+ +e.slice(0,-1),"hsl("+360*i+", "+100*a+"%, "+s+"%)")},n.prototype.darken=function(t,e){var n,i,a,s,r,o;if(t&&e&&/^[0-9]{1,2}%$/.test(e))return this.isRgba(t)?(r=this.getRgba(t),o=+r.a+ +e.slice(0,-1)/100,"rgba("+r.r+", "+r.g+", "+r.b+", "+o+")"):(n=this.getHsl(t),i=+n.h,a=+n.s,s=100*+n.l-+e.slice(0,-1),"hsl("+360*i+", "+100*a+"%, "+s+"%)")},n.prototype.isHex=function(t){return/^#[a-fA-F0-9]{3}$|#[a-fA-F0-9]{6}$/.test(t)},n.prototype.isRgb=function(t){return/^rgb\((\s*[0-5]{0,3}\s*,?){3}\)$/.test(t)},n.prototype.isRgba=function(t){return/^rgba\((\s*[0-5]{0,3}\s*,?){3}[0-9.\s]*\)$/.test(t)},n.prototype.getRgb=function(t){var e,n,i,a;if(this.isHex(t)){var s;n=(s=[(e=this.hexToRGB(t)).r,e.g,e.b])[0],i=s[1],a=s[2]}else if(this.isRgb(t)){var r;n=(r=[(e=t.slice(4,-1).split(","))[0],e[1],e[2]])[0],i=r[1],a=r[2]}return{r:n,g:i,b:a}},n.prototype.getRgba=function(t){var e,n,i,a,s,r;return r=[(e=t.slice(5,-1).split(","))[0],e[1],e[2],e[3]],n=r[0],i=r[1],a=r[2],s=r[3],{r:n,g:i,b:a,a:s}},n.prototype.getHsl=function(t){var e,n,i,a,s,r,o,h,c;i=(c=[(n=this.getRgb(t)).r,n.g,n.b])[0],a=c[1],s=c[2];var l;return l=[(e=this.rgbToHSL(i,a,s)).h,e.s,e.l],r=l[0],o=l[1],h=l[2],{h:r,s:o,l:h}};var i=function(){this.imageList=[],this.loadNum=0};i.prototype.ready=function(t){var e=this;this.imageList.forEach(function(t){e.loadImg(t)});var n=setInterval(function(){e.loadNum===e.imageList.length&&(clearInterval(n),t&&t())},50)},i.prototype.loadImg=function(t){var e=this,n=setInterval(function(){!0===t.complete&&(e.loadNum++,clearInterval(n))},50)},i.prototype.addImg=function(t){var e=this;t.forEach(function(t){var n=new Image;n.src=t,n.name=t,n.loaded=!1,e.imageList.push(n)})},i.prototype.getImg=function(t){var e;return this.imageList.forEach(function(n){n.name==t&&(e=n)}),e};var a=function(t,e){this._=e,this.settingsData={color:t.color,startX:t.startX,startY:t.startY,dash:t.dash,offset:t.offset?t.offset:0,fillColor:t.fillColor,sliceX:t.sliceX,sliceY:t.sliceY,width:t.width,height:t.height,sliceWidth:t.sliceWidth,sliceHeight:t.sliceHeight,backgroundColor:t.backgroundColor,text:t.text,radius:t.radius}};a.prototype.on=function(t,e){var n=this;if(!t)throw"no eventTypes defined!";if(!e||"function"!=typeof e)throw"you need defined a callback!";this.events=this.events||[];var i=this;return t.split(" ").forEach(function(t){~n._.eventTypes.indexOf(t)?i.events.push({eventType:t,callback:e}):console.error(t+" is not in eventTypes!")}),this},a.prototype.isPointInner=function(t,e){var n=this.moveX,i=this.moveY,a=this.fixed?0:this._.transX,s=this.fixed?0:this._.transY,r=t>this.startX+n+a,o=t<this.startX+this.width+n+a,h=e>this.startY+i+s,c=e<this.startY+this.height+i+s;switch(this.type){case"rectangle":case"image":case"text":case"coord":return!!(r&&o&&h&&c);case"arc":var l,u,g=this.x,f=this.y,d=Math.PI,v=this.startAngle<0?2*d+d/180*this.startAngle:d/180*this.startAngle,p=this.endAngle<0?2*d+d/180*this.endAngle:d/180*this.endAngle,m=this.radius,b=t-g-n-a,y=e-f-i-s;if(isNaN(v)||isNaN(p))l=!!(Math.sqrt(b*b+y*y)<=m);else{var x;b>=0&&y>=0?x=0===b?d/2:Math.atan(y/b):b<=0&&y>=0?x=0===b?d:d-Math.atan(y/Math.abs(b)):b<=0&&y<=0?x=0===b?d:Math.atan(Math.abs(y)/Math.abs(b))+d:b>=0&&y<=0&&(x=0===b?3*d/2:2*d-Math.atan(Math.abs(y)/b)),u=Math.sqrt(b*b+y*y),l=v<p?!!(x>=v&&x<=p&&u<=m):!!((x>=0&&x<=p||x>=v&&x<=2*d)&&u<=m)}return l}},a.prototype.config=function(t){if("[object Object]"===Object.prototype.toString.call(t))return t.drag&&(this.enableDrag=!0),t.changeIndex&&(this.enableChangeIndex=!0),t.fixed&&(this.fixed=!0),t.bg&&(this.isBg=!0),this.zindex=t.zindex?t.zindex:0,this},a.prototype.drag=function(t){t&&"boolean"==typeof t&&(this.enableDrag=!0)},a.prototype.changeIndex=function(t){t&&"boolean"==typeof t&&(this.enableChangeIndex=!0)};var s=function(t,e){var n=new a(t,e);return Object.assign({},n.settingsData,{isDragging:!1,hasEnter:!1,hasDraggedIn:!1,moveX:0,moveY:0,zindex:0,on:n.on,isPointInner:n.isPointInner,config:n.config,drag:n.drag,changeIndex:n.changeIndex,_:n._})},r={arc:function(t,e){return Object.assign({},s(t,e),{type:"arc",draw:function(){var n=e.canvas,i=this.x=t.x,a=this.y=t.y,s=this.style=t.style,r=this.startAngle=t.startAngle,o=this.endAngle=t.endAngle;n.save(),this.fixed&&n.translate(-e.transX,-e.transY),n.translate(this.moveX,this.moveY),n.translate(i,a),n.beginPath(),isNaN(r)||isNaN(o)?n.arc(0,0,this.radius,0,2*Math.PI):(n.arc(0,0,this.radius,Math.PI/180*r,Math.PI/180*o,!1),n.save(),n.rotate(Math.PI/180*o),n.moveTo(this.radius,0),n.lineTo(0,0),n.restore(),n.rotate(Math.PI/180*r),n.lineTo(this.radius,0)),"fill"===s?(n.fillStyle=this.color,n.fill()):(n.strokeStyle=this.color,n.stroke()),n.closePath(),n.restore()}})},coord:function(e,n){var i,a,r,o,h,c,l,u,g,f,d,v=n.canvas,p=this.startX=e.startX,m=this.startY=e.startY,b=e.width,y=e.height,x=e.xAxis,w=e.series,T=e.boundaryGap,k=e.title,_=e.subTitle,I=b<=300?b/5:b/10,P=t.getMaxMin(!1,w,x).max,M=t.getMaxMin(!1,w,x).min,Y=t.calculateCoord(P,M).gap;c=y-2*I,g=P>0?Math.ceil(P/Y):0,f=M<0?Math.ceil(Math.abs(M)/Y):0,a=g+f,u=Math.round(c/a),o=a,d=u,x.data&&x.data.length>0&&(i=x.data.length,l=(h=b-2*I)/(r=T?i:i-1));return Object.assign({},s(e,n),{type:"coord",draw:function(){v.save(),v.translate(-.5,-.5),v.translate(this.moveX,this.moveY),this.fixed&&v.translate(-n.transX,-n.transY),this.backgroundColor&&(v.save(),v.fillStyle=this.backgroundColor,v.fillRect(p,m,b,y),v.restore()),v.save(),v.font=b<=300?"18px serif":"24px serif",v.textAlign="left",v.textBaseline="top",v.fillText(k,I/2,10),v.restore(),v.save(),v.fillStyle="#666666",v.font=b<=300?"10px serif":"14px serif",v.textAlign="left",v.textBaseline="top",v.fillText(_,I/2+4,40),v.restore(),v.translate(p+I,m+I+g*u+20),v.beginPath(),v.moveTo(0,0+f*u),v.lineTo(0,f*u-(y-2*I)-5),v.stroke(),v.closePath();for(var e=0;e<=g;e++)v.beginPath(),v.moveTo(0,-u*e),v.lineTo(-5,-u*e),v.stroke(),v.closePath(),v.save(),v.strokeStyle="#ccc",v.beginPath(),v.moveTo(0,-u*e),v.lineTo(b-2*I,-u*e),v.stroke(),v.restore(),v.closePath(),v.save(),v.font="12px serif",v.textAlign="right",v.textBaseline="middle",v.fillText(t.formatFloat(Y*e),-10,-u*e),v.restore();for(var i=0;i<=f;i++)v.beginPath(),v.moveTo(0,u*i),v.lineTo(-5,u*i),v.stroke(),v.closePath(),v.save(),v.strokeStyle="#ccc",v.beginPath(),v.moveTo(0,u*i),v.lineTo(b-2*I,u*i),v.stroke(),v.restore(),v.closePath(),v.save(),v.font="12px serif",v.textAlign="right",v.textBaseline="middle",0!==i&&v.fillText(t.formatFloat(-Y*i),-10,u*i),v.restore();v.beginPath(),v.moveTo(0,0),v.lineTo(b-2*I,0),v.stroke(),v.closePath(),x.data&&x.data.length>0&&x.data.forEach(function(t,e){v.beginPath(),v.moveTo(l*(e+1),0),v.lineTo(l*(e+1),5),v.save(),v.font="15px serif",v.textAlign="center",v.textBaseline="top",T?v.fillText(t,l*e+l/2,5+f*d):v.fillText(t,l*e,5+f*d),v.restore(),v.stroke(),v.closePath()}),v.restore()},xLength:h,yLength:c,xSpace:r,ySpace:o,xGapLength:l,yGapLength:u,upCount:g,downCount:f,gap:Y,margin:I,TO_TOP:20,boundaryGap:T})},image:function(t,e){t.src&&!~e.images.indexOf(t.src)&&e.images.push(t.src);return Object.assign({},s(t,e),{type:"image",draw:function(){var n=e.canvas,i=this.startX=t.startX,a=this.startY=t.startY,s=t.src;n.save(),n.translate(this.moveX,this.moveY),this.fixed&&n.translate(-e.transX,-e.transY),this.sliceWidth&&this.sliceHeight?n.drawImage(e.loader.getImg(s),this.sliceX,this.sliceY,this.sliceWidth,this.sliceHeight,i,a,this.width,this.height):n.drawImage(e.loader.getImg(s),i,a,this.width,this.height),n.restore()}})},line:function(t,e){var n=e.canvas,i=t.matrix,a=t.lineWidth,r=t.lineCap,o=t.lineJoin,h=t.strokeColor,c=t.smooth;return Object.assign({},s(t,e),{type:"line",draw:function(){if(n.save(),n.translate(-.5,-.5),n.translate(this.moveX,this.moveY),this.fixed&&n.translate(-e.transX,-e.transY),n.lineWidth=a,n.strokeStyle=h,n.beginPath(),n.lineDashOffset=this.offset,this.dash&&"[object Array]"===Object.prototype.toString.call(this.dash)&&n.setLineDash(this.dash),r&&(n.lineCap=r),o&&(n.lineJoin=o),c)for(var t=0;t<i.length;t++)if(0===t)n.moveTo(i[t].x,i[t].y);else{var s=function(t,e,n,i){var a,s,r,o;if(n&&i||(n=.25,i=.25),e<1?(a=t[0].x+(t[1].x-t[0].x)*n,s=t[0].y+(t[1].y-t[0].y)*n):(a=t[e].x+(t[e+1].x-t[e-1].x)*n,s=t[e].y+(t[e+1].y-t[e-1].y)*n),e>t.length-3){var h=t.length-1;r=t[h].x-(t[h].x-t[h-1].x)*i,o=t[h].y-(t[h].y-t[h-1].y)*i}else r=t[e+1].x-(t[e+2].x-t[e].x)*i,o=t[e+1].y-(t[e+2].y-t[e].y)*i;return{pA:{x:a,y:s},pB:{x:r,y:o}}}(i,t-1);n.bezierCurveTo(s.pA.x,s.pA.y,s.pB.x,s.pB.y,i[t].x,i[t].y)}else i.forEach(function(t,e){0===e?n.moveTo(t.x,t.y):n.lineTo(t.x,t.y)});n.stroke(),n.closePath(),n.restore()},totalLength:void 0})},rectangle:function(t,e){return Object.assign({},s(t,e),{type:"rectangle",draw:function(){var t=e.canvas;t.save(),t.translate(this.moveX,this.moveY),this.fixed&&t.translate(-e.transX,-e.transY),t.fillStyle=this.fillColor?this.fillColor:"#000",t.fillRect(this.startX,this.startY,this.width,this.height),t.restore()}})},text:function(t,e){return Object.assign({},s(t,e),{type:"text",draw:function(){var n,i,a=e.canvas,s=this.startX=t.startX,r=this.startY=t.startY,o=t.width,h=t.height,c=t.paddingTop?t.paddingTop:0,l=t.center,u=t.font,g=t.type,f=t.color,d=this.text;g&&(a.save(),a.translate(this.moveX,this.moveY),this.fixed&&a.translate(-e.transX,-e.transY),this.backgroundColor&&(a.save(),a.fillStyle=this.backgroundColor,a.fillRect(s,r,o,h),a.restore()),a.font=u,a.textBaseline="top",n=a.measureText(d).width,i=function(t,e,n){var i=t.measureText(e).width,a=t.measureText("...").width;if(i<=n||i<=a)return e;for(var s=e.length;i>=n-a&&s-- >0;)e=e.substring(0,s),i=t.measureText(e).width;return e+"..."}(a,d,o-8),"stroke"===g?(a.strokeStyle=f,l?n<o-8&&a.strokeText(i,s+4+(o-n-8)/2,r+c):a.strokeText(i,s+4,r+c)):(a.fillStyle=f,l?n<o-8&&a.fillText(i,s+4+(o-n-8)/2,r+c):a.fillText(i,s+4,r+c)),a.restore())}})}},o=function(i){var a=this;this.version="3.0.0-beta.0",this.objects=[],this.transX=0,this.transY=0,this.scale=1,this.loader=null,this.pointerInnerArray=[],this.isDragging=!1,this.eventTypes=["mousedown","mouseup","mouseenter","mouseleave","mousemove","drag","dragend","dragin","dragout","drop"],this._event=new e(this),this.color=new n,this.element=i.element,this.canvas=this.element.getContext("2d"),this.width=i.width,this.height=i.height,function(t,e){var n=window.devicePixelRatio||1,i=null;t.forEach(function(t){i=t.getContext("2d"),t.style.width=e.width+"px",t.style.height=e.height+"px",t.width=e.width*n,t.height=e.height*n,i.scale(n,n)})}([this.element],{width:this.width,height:this.height}),this.enableGlobalTranslate=i.enableGlobalTranslate||!1,this.images=i.images||[],this.utils=t,Object.keys(r).forEach(function(t){a[t]=function(e){return r[t](e,this)}})};o.prototype.imgReady=function(){this.loader=new i,this.loader.addImg(this.images)},o.prototype.addChild=function(e){t.isArr(e)?this.objects=this.objects.concat(e):this.objects.push(e),this.objects.sort(function(t,e){return t.zindex-e.zindex}),this._objects=t.reverse(this.objects)},o.prototype.show=function(){var t=this;this.imgReady(),this.loader.ready(function(){t.draw(),t._event.triggerEvents()})},o.prototype.draw=function(){this.objects.forEach(function(t){t.draw()})},o.prototype.redraw=function(){this.clear(),this.canvas.save(),this.canvas.translate(this.transX,this.transY),this.draw(),this.canvas.restore()},o.prototype.clear=function(){this.canvas.clearRect(0,0,this.width,this.height)},o.prototype.animate=function(t){var e=this;this._event.triggerEvents();var n=(new Date).getTime(),i=function(){t(),e[n]=requestAnimationFrame(i)};return i(),n},o.prototype.stop=function(t){cancelAnimationFrame(this[t])},o.prototype.globalTranslate=function(t){"boolean"==typeof t&&t&&(this.enableGlobalTranslate=!0)},o.prototype.getVersion=function(){return this.version},o.prototype.scaleCanvas=function(e){if("boolean"==typeof e&&e){var n=this;t.bind(this.element,"wheel",function(t){t.deltaY<0?n.scale<=3&&(n.scale+=.02,n.redraw()):n.scale>.5&&(n.scale-=.02,n.redraw())})}};return function(t){return new o(t)}});
