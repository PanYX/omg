<!DOCTYPE html>
<html>
<head>
	<title>test html</title>
	<style>
		html, body {
			margin: 0;
			padding: 0;
			width: 100%;
			height: 100%;
			overflow: hidden;
		}
		#canvas {
			margin: 0;
			background-color: #fff;
		}
	</style>
</head>
<body>
<div id="fps"></div>
<div class="container">
		<canvas id="canvas"></canvas>
</div>
<script src="../dist/lcl.js"></script>
<script>
  var flag;
  var bear = 0;
  var width = document.body.clientWidth,
  	height = document.body.clientHeight;

	var stage = LCL.init({
		element: document.getElementById('canvas'),
		width: width,
		height: height,
		enableGlobalTranslate: true
	});

	var title = LCL.text({
		startX: (LCL.width - 800)/2,
		startY: (height - 300)/2,
		width: 800,
		height: 300,
		paddingTop: 0, //text padding top
		center: true, 
		backgroundColor: 'blue', // optional
		font: 'italic bold 270px arial,sans-serif',
		text: 'LCL',
		color: '#fff',
		type: 'fill'
	}).config({
		fixed: true,
		bg: true
	});

	var demo1 = LCL.text({
		startX: (LCL.width - 300)/2,
		startY: 20,
		width: 300,
		height: 40,
		paddingTop: 2, //text padding top
		center: true, 
		backgroundColor: '#ef4476', // optional
		font: 'italic bold 30px arial,sans-serif',
		text: 'Walking Control',
		color: '#fff',
		type: 'fill'
	}).on('mouseenter', function() {
		LCL.element.style.cursor = 'pointer';
		demo1.backgroundColor = '#ef8454';
		stage.redraw();
	}).on('mouseleave', function() {
		LCL.element.style.cursor = 'default';
		demo1.backgroundColor = '#ef4476';
		stage.redraw();
	}).on('mousedown', function() {
		window.location = './index3.html';
	}).config({
		fixed: true
	});

	var demo2 = LCL.text({
		startX: (LCL.width - 300)/2,
		startY: 60,
		width: 300,
		height: 40,
		paddingTop: 2, //text padding top
		center: true, 
		backgroundColor: '#ef4476', // optional
		font: 'italic bold 30px arial,sans-serif',
		text: 'Drag and Drop',
		color: '#fff',
		type: 'fill'
	}).on('mouseenter', function() {
		LCL.element.style.cursor = 'pointer';
		demo2.backgroundColor = '#ef8454';
		stage.redraw();
	}).on('mouseleave', function() {
		LCL.element.style.cursor = 'default';
		demo2.backgroundColor = '#ef4476';
		stage.redraw();
	}).on('mousedown', function() {
		window.location = './index2.html';
	}).config({
		fixed: true
	});

	var demo3 = LCL.text({
		startX: (LCL.width - 300)/2,
		startY: 100,
		width: 300,
		height: 40,
		paddingTop: 2, //text padding top
		center: true, 
		backgroundColor: '#ef4476', // optional
		font: 'italic bold 30px arial,sans-serif',
		text: 'Big Data',
		color: '#fff',
		type: 'fill'
	}).on('mouseenter', function() {
		LCL.element.style.cursor = 'pointer';
		demo3.backgroundColor = '#ef8454';
		stage.redraw();
	}).on('mouseleave', function() {
		LCL.element.style.cursor = 'default';
		demo3.backgroundColor = '#ef4476';
		stage.redraw();
	}).on('mousedown', function() {
		window.location = './index4.html';
	}).config({
		fixed: true
	});

	var trash = LCL.text({
		startX: LCL.width - 300,
		startY: 40,
		width: 280,
		height: 120,
		paddingTop: 30, //text padding top
		center: true, 
		backgroundColor: '#ef4476', // optional
		font: 'italic bold 54px arial,sans-serif',
		text: '捕熊箱(' + bear + ')',
		color: '#fff',
		type: 'fill'
	}).config({
		fixed: true,
		drag: true
	}).on('dragin', function() {
		trash.backgroundColor = 'red';
	}).on('dragout', function() {
		trash.backgroundColor = '#ef4476';
	}).on('drop', function( item ) {
		bear++;
		trash.backgroundColor = '#ef4476';
		trash.text = '捕熊箱(' + bear + ')';
		LCL.objects.pop();
		LCL._objects = LCL.utils.reverse(LCL.objects);
		stage.redraw();
	});

	stage.addChild(title);
	stage.addChild(demo1);
	stage.addChild(demo2);
	stage.addChild(demo3);
	stage.addChild(trash);

	function createBear() {
		var arr = [{
			w: 97,
			sx: 5,
			sy: 0
		}, {
			w: 97,
			sx: 5,
			sy: 470
		}, {
			w: 64,
			sx: 3,
			sy: 238
		}, {
			w: 82,
			sx: 7,
			sy: 718
		}];

		var randomNum = Math.round(Math.random()*3);
		stage.addChild(
			LCL.image({
				startX: Math.random() * width - 50,
				startY: Math.random() * height - 60,
				width: arr[randomNum].w,
				height: 110,
				sliceX: arr[randomNum].sx,
				sliceY: arr[randomNum].sy,
				sliceWidth: arr[randomNum].w,
				sliceHeight: 110,
				src: './img/action.png'
			}).config({
				drag: true,
				changeIndex: true
			})
		);
	}
	
	for(var i = 0;i < 100; i++) {
		createBear();
	}

	stage.show();
	stage.animate(go);

	var num = 0;
	function go() {
		if(num % 4 === 0) {
			LCL.objects.forEach(function(item) {

				if(item.sliceY === 0) {
					if(item.sliceX > 102 * 7) {
						item.sliceX = 5;
					} else {
						item.sliceX = item.sliceX + 102;
					}
				} else if(item.sliceY === 238) {
					if(item.sliceX > 64 * 7) {
						item.sliceX = 3;
					} else {
						item.sliceX = item.sliceX + 64;
					}
				} else if(item.sliceY === 470) {
					if(item.sliceX > 104 * 7) {
						item.sliceX = 5;
					} else {
						item.sliceX = item.sliceX + 104;
					}
				} else if(item.sliceY === 718) {
					if(item.sliceX > 82 * 7) {
						item.sliceX = 7;
					} else {
						item.sliceX = item.sliceX + 82;
					}
				}

			});
		}

		stage.redraw();
		num++;
	}

	window.onresize = function() {
		LCL.element.width = LCL.width = width;
		LCL.element.height = LCL.height = height;
		stage.redraw();
	}

</script>
</body>
</html>